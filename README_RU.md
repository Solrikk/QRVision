<div align="center"> <h3> <a href="https://github.com/Solrikk/QRVision/blob/main/README.md">English</a> | <a href="https://github.com/Solrikk/QRVision/blob/main/README_RU.md">⭐Russian⭐</a> | <a href="https://github.com/Solrikk/QRVision/blob/main/README_GE.md">German</a> | <a href="https://github.com/Solrikk/QRVision/blob/main/README_JP.md">Japanese</a> | <a href="README_KR.md">Korean</a> | <a href="README_CN.md">Chinese</a> </h3> </div>

-----------------

**`QRVision`** — представляет собой веб-сервис для сканирования QR-кодов, где фронтенд взаимодействует с оператором для захвата изображения через камеру, а бэкенд обрабатывает это изображение и пытается извлечь данные из QR-кодов в базу данных.

## Основные компоненты

### _Стек технологий:_

### _Backend:_

- **`Python`**: Основной язык программирования, используемый для реализации серверной части проекта.
- **`Flask`**: Легковесный и мощный веб-фреймворк для создания и развертывания веб-приложений.
- **`OpenCV`**: Библиотека компьютерного зрения для обработки изображений и выполнения различных преобразований для улучшения распознавания QR-кодов.
- **`pyzbar`**: Библиотека для декодирования QR-кодов.
- **`scikit-learn`**: Библиотека машинного обучения, применяемая для разносторонней обработки данных, включая использование TF-IDF для анализа текста.
- **`numpy`**: Библиотека для выполнения высокопроизводительных численных вычислений и обработки данных через массивы.
- **`SQLAlchemy`**: Объектно-реляционное отображение (ORM), обеспечивающее удобную работу с базой данных, абстрагируя детали SQL-запросов.
- **`PostgreSQL`**: Надежная и масштабируемая система управления базами данных (СУБД), используемая для хранения QR-кодов и связанных данных.

### _Frontend:_

- **`HTML`**: Язык разметки, используемый для создания структуры веб-страницы. С его помощью можно определить различные элементы страницы, такие как заголовки, абзацы, формы и кнопки.
- **`CSS`**: Язык стилей, который используется для оформления HTML-элементов. С его помощью можно задать цвет, шрифты, размеры, отступы и другие визуальные характеристики элементов веб-страницы.
- **`JavaScript`**: Язык программирования, который используется для добавления интерактивности на веб-страницу. В этом проекте он необходим для управления взаимодействием с оператором, например, для захвата изображения с камеры и его отправки на сервер.

### _Дополнительные зависимости:_

- **`Poetry`**: Инструмент для управления зависимостями и создания изолированных виртуальных окружений в Python. Poetry упрощает установку и обновление пакетов, а также управление версиями, обеспечивая согласованность и воспроизводимость окружений.
- **`pyright`**: Быстрый и мощный статический анализатор типов для Python, который помогает выявлять ошибки типов еще до выполнения кода, тем самым повышая надежность и качество программного обеспечения.
- **`ruff`**: Линтер, предназначенный для улучшения качества кода и соблюдения стиля. Ruff помогает обнаруживать и исправлять стилистические ошибки, обеспечивая единообразие и чистоту кода согласно заданным стандартам.

### _Deployment:_

- **`Gunicorn`**: Высокопроизводительный WSGI HTTP сервер для запуска Flask-приложений в производственной среде. Gunicorn обеспечивает масштабируемость и надежность вашего веб-приложения, позволяя справляться с большим количеством одновременных запросов и обеспечивая стабильную работу сервиса.

### _Файловая структура:_

```shell
/app
├── .replit
├── static
│   ├── script.js
│   └── styles.css
├── main.py
├── pyproject.toml
├── templates
│   └── index.html
├── ...
├── replit.nix
├── models.py
```

- **`main.py`**: Основной backend файл, содержаший Flask маршруты и логику обработки изображений и QR-кодов.
- **`templates/index.html`**: HTML-шаблон для главной страницы приложения.
- **`pyproject.toml`**: Файл конфигурации для управления зависимостями проекта и настройки релевации кода (Pyright и Ruff).
________

  - **OpenCV (Open Source Computer Vision Library)** — используется для различных задач, связанных с обработкой изображений и распознаванием QR-кодов. OpenCV является мощным инструментом для компьютерного зрения и обработки изображений с множеством функций и модулей:

### _Процесс сканирования QR-кодов:_

### 1. **Загрузка изображения**:
    - При нажатии на кнопку сканирования `JavaScript` захватывает изображение с камеры и отправляет его на сервер через `POST-запрос` .

### 2. **Получение изображения на сервере**: 
 - Flask получает изображение через эндпоинт `/scan-qr/`.
    - `main.py`: Серверный код получает изображение, используя Flask, и читает его содержимое.

### 3. **Предобработка изображения**: 
- С помощью **`OpenCV`** изображение преобразуется для улучшения видимости QR-кода.
    - В функции `preprocess_image` изображение может быть конвертировано в серый цвет, заблюрено, повёрнуто или подвергнуто адаптивному пороговому преобразованию.

### 4. **Декодирование QR-кода**: 
- Библиотека **`Pyzbar`** декодирует QR-коды на обработанном изображении.
    - `main.py`: Функция `decode` из Pyzbar пытается распознать QR-коды на каждом этапе предобработки изображения.
    - В `models.py` определяется модель QR-кода для базы данных.

### 5. **Результат декодирования**: 
- Если QR-код был успешно распознан, данные из QR-кода сохраняются в PostgreSQL.
    - `main.py`: Считанные данные сохраняются в **`PostgreSQL`**
    - В `db.py` конфигурируется подключение к базе данных и управляется сессиями запросов.

### 6. **Возврат результата на клиент**: 
- Результаты обработки, включая декодированные данные и обработанное изображение, возвращаются оператору.
   - Сервер кодирует обработанное изображение в Base64, чтобы вернуть его в формате JSON через Flask.
   - Оператору отображается результат на веб-странице.

### 7. **База данных:**
Для хранения данных используем PostgreSQL, СУБД, которая позволяет надежно хранить данные и легко масштабироваться.
 - SQLAlchemy ORM используется для взаимодействия с базой данных. Он упрощает работу с данными и позволяет писать код, независимый от конкретной СУБД.
 - Модели определяются в `models.py`. Они представляют собой схемы таблиц базы данных и позволяют взаимодействовать с данными через классы Python.

**`PostgreSQL`** — это мощная, объектно-реляционная база данных с открытым исходным кодом (ORDBMS). Она поддерживает множество современных функций и стандартов SQL.

_**Основные характеристики PostgreSQL:**_

1. **Открытый исходный код**: PostgreSQL распространяется под лицензией PostgreSQL, которая позволяет свободно использовать, изменять и распространять базу данных.

2. **Совместимость со стандартами**: PostgreSQL поддерживает полный набор функций стандарта SQL и добавляет дополнительные возможности, такие как индексирование полнотекстового поиска, массивы, таблицы с наследованием и др.

3. **Расширяемость**: PostgreSQL может быть легко расширена за счет пользовательских функций, агрегатов, типов данных и операторов.

4. **Продвинутое управление транзакциями**: PostgreSQL поддерживает ACID (Atomicity, Consistency, Isolation, Durability), обеспечение высокой надежности данных.

5. **Поддержка JSON**: PostgreSQL имеет мощные встроенные функции для работы с JSON и JSONB, что делает его подходящим для хранения гибких и сложных документов.

6.**Масштабируемость и производительность**: PostgreSQL поддерживает широкий диапазон функций, которые позволяют масштабировать и оптимизировать производительность, включая индексы, репликацию, шардинг (разделение данных) и параллельное выполнение запросов.
